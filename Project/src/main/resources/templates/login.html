<!-- 
  ERRO CORRIGIDO: 
  A tag <html> foi movida para o topo, e as tags <head> e <body> foram removidas 
  de dentro do fragmento.
-->
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<head>
    <title>Login</title>
</head>

<!-- O 'layout:fragment' deve estar num elemento de topo, não dentro de um <body> -->
<main layout:fragment="content" class="min-h-screen flex items-center justify-center pt-20 pb-10">
    
    <div class="w-full max-w-md bg-card p-8 rounded-xl shadow-2xl border border-border">
        
        <h1 class="text-3xl font-bold text-center mb-6 text-foreground">
            <span class="bg-gradient-primary bg-clip-text text-transparent">ConsulThi</span> Login
        </h1>

        <!-- Mensagens de Feedback (RF02) -->
        <div th:if="${param.error}" class="bg-destructive/10 text-destructive border border-destructive p-3 rounded-md mb-4 text-center">
            <p class="font-semibold">Nome de usuário ou senha inválidos. Tente novamente.</p>
            <p class="text-sm">Sua conta pode estar inativa se o cadastro ainda não foi aprovado.</p>
        </div>
        <div th:if="${param.logout}" class="bg-primary/10 text-primary border border-primary p-3 rounded-md mb-4 text-center">
            <p class="font-semibold">Você foi desconectado com sucesso.</p>
        </div>
        <div th:if="${message}" class="bg-primary/10 text-primary border border-primary p-3 rounded-md mb-4 text-center">
            <p th:text="${message}"></p>
        </div>
        
        <form th:action="@{/login}" method="post" class="space-y-4">
            
            <div class="form-group">
                <label for="username" class="block text-sm font-medium text-muted-foreground mb-1">Nome de Usuário</label>
                <input type="text" id="username" name="username" required
                       class="w-full p-3 rounded-md bg-background border border-border focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-foreground placeholder-muted-foreground"
                       placeholder="Seu username">
            </div>
            
            <div class="form-group">
                <label for="password" class="block text-sm font-medium text-muted-foreground mb-1">Senha</label>
                <input type="password" id="password" name="password" required
                       class="w-full p-3 rounded-md bg-background border border-border focus:border-primary focus:ring-1 focus:ring-primary transition-colors text-foreground placeholder-muted-foreground"
                       placeholder="Sua senha">
            </div>
            
            <button type="submit" class="w-full mt-6 px-4 py-3 rounded-md bg-primary hover:bg-primary/90 text-primary-foreground font-semibold shadow-glow-primary transition-colors">
                Entrar
            </button>

        </form>

        <p class="text-center text-sm mt-6 text-muted-foreground">
            Ainda não tem conta? 
            <a th:href="@{/register}" class="text-primary hover:underline font-semibold">Cadastre-se</a>
        </p>
    </div>
</main>
</html>